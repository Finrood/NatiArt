<div class="container mx-auto px-4 py-8">
  <h1 class="text-3xl font-semibold mb-8 text-gray-800">Checkout</h1>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
    <!-- Left Column: User Information -->
    <div>
      <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <h2 class="text-xl font-semibold mb-4">Your Information</h2>
        <ng-container *ngIf="(isLoggedIn$ | async); else guestCheckout">
          <p class="mb-4">Welcome back, {{ (currentUser$ | async)?.username }}!</p>
        </ng-container>
        <ng-template #guestCheckout>
          <p class="mb-4">Checking out as a guest? You can also <a routerLink="/login" class="text-blue-500 hover:underline">log in</a> to use your saved information.</p>
        </ng-template>

        <!-- Step indicator -->
        <div class="flex justify-center items-center space-x-4">
          <div class="w-8 h-8 rounded-full bg-primary text-white flex items-center justify-center text-sm font-medium"
               [ngClass]="{'bg-primary': currentStep === 1, 'bg-primary-light': currentStep === 2 || currentStep === 3}">
            1
          </div>
          <div class="w-16 h-1 bg-primary-light" [ngClass]="{'bg-primary': currentStep === 2 || currentStep === 3}"></div>
          <div class="w-8 h-8 rounded-full bg-primary-light text-white flex items-center justify-center text-sm font-medium"
               [ngClass]="{'bg-primary': currentStep === 2, 'bg-primary-light': currentStep === 3}">
            2
          </div>
          <div class="w-16 h-1 bg-primary-light" [ngClass]="{'bg-primary': currentStep === 3}"></div>
          <div class="w-8 h-8 rounded-full bg-primary-light text-white flex items-center justify-center text-sm font-medium"
               [ngClass]="{'bg-primary': currentStep === 3}">
            3
          </div>
        </div>

        <form [formGroup]="checkoutForm" (ngSubmit)="onSubmit()" class="mt-8 space-y-6">
          <!-- Step 1: Personal information -->
          <div *ngIf="currentStep === 1" [@slideInRight] formGroupName="userInfo" class="space-y-6">
            <div>
              <label for="email" class="block text-sm font-medium text-secondary">Email address</label>
              <input id="email" formControlName="email" type="email" required
                     class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                     [ngClass]="{'border-error': getFieldError('userInfo.email')}"
                     placeholder="you@yourbest.com">
              <p *ngIf="getFieldError('userInfo.email')" class="mt-2 text-sm text-red-600">
                {{ getFieldError('userInfo.email') }}
              </p>
            </div>

            <div>
              <label for="firstname" class="block text-sm font-medium text-secondary">First Name</label>
              <input id="firstname" formControlName="firstname" type="text" required
                     class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                     [ngClass]="{'border-error': getFieldError('userInfo.firstname')}"
                     placeholder="John">
              <p *ngIf="getFieldError('userInfo.firstname')" class="mt-2 text-sm text-red-600">
                {{ getFieldError('userInfo.firstname') }}
              </p>
            </div>

            <div>
              <label for="lastname" class="block text-sm font-medium text-secondary">Last Name</label>
              <input id="lastname" formControlName="lastname" type="text" required
                     class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                     [ngClass]="{'border-error': getFieldError('userInfo.lastname')}"
                     placeholder="Doe">
              <p *ngIf="getFieldError('userInfo.lastname')" class="mt-2 text-sm text-red-600">
                {{ getFieldError('userInfo.lastname') }}
              </p>
            </div>

            <div>
              <label for="phone" class="block text-sm font-medium text-secondary">Phone</label>
              <input id="phone" formControlName="phone" type="tel"
                     class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                     [ngClass]="{'border-error': getFieldError('userInfo.phone')}"
                     placeholder="(XX) XXXXX-XXXX">
              <p *ngIf="getFieldError('userInfo.phone')" class="mt-2 text-sm text-red-600">
                {{ getFieldError('userInfo.phone') }}
              </p>
            </div>

          </div>

          <!-- Step 2: Shipping and Billing information -->
          <div *ngIf="currentStep === 2" [@slideInRight] class="space-y-6" formGroupName="shippingInfo">
            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
              <div>
                <label for="zipCode" class="block text-sm font-medium text-secondary">Zip Code</label>
                <input id="zipCode" formControlName="zipCode" type="text" required
                       class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                       [ngClass]="{'border-error': getFieldError('shippingInfo.zipCode')}"
                       placeholder="XXXXX-XXX"
                       cepFormat
                       (input)="onZipCodeChange('shippingInfo')">
                <p *ngIf="getFieldError('shippingInfo.zipCode')" class="mt-2 text-sm text-red-600">
                  {{ getFieldError('shippingInfo.zipCode') }}
                </p>
              </div>
            </div>

            <div *ngIf="isLoadingShippingAddress" class="text-center">
              <app-loading-spinner></app-loading-spinner>
              <p class="mt-2 text-sm text-secondary-light">Loading address...</p>
            </div>

            <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
              <div>
                <label for="country" class="block text-sm font-medium text-secondary">Country</label>
                <input readonly id="country" formControlName="country" type="text"
                       class="mt-1 block w-full px-3 py-2 bg-gray-100 border border-primary rounded-md shadow-input text-secondary-light focus:outline-none sm:text-sm"
                       placeholder="Country">
              </div>

              <div>
                <label for="state" class="block text-sm font-medium text-secondary">State</label>
                <input id="state" formControlName="state" type="text" required
                       class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                       [ngClass]="{'border-error': getFieldError('shippingInfo.state')}"
                       placeholder="State">
                <p *ngIf="getFieldError('shippingInfo.state')" class="mt-2 text-sm text-red-600">
                  {{ getFieldError('shippingInfo.state') }}
                </p>
              </div>

              <div>
                <label for="city" class="block text-sm font-medium text-secondary">City</label>
                <input id="city" formControlName="city" type="text" required
                       class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                       [ngClass]="{'border-error': getFieldError('shippingInfo.city')}"
                       placeholder="City">
                <p *ngIf="getFieldError('shippingInfo.city')" class="mt-2 text-sm text-red-600">
                  {{ getFieldError('shippingInfo.city') }}
                </p>
              </div>

              <div>
                <label for="neighborhood" class="block text-sm font-medium text-secondary">Neighborhood</label>
                <input id="neighborhood" formControlName="neighborhood" type="text" required
                       class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                       [ngClass]="{'border-error': getFieldError('shippingInfo.neighborhood')}"
                       placeholder="neighborhood">
                <p *ngIf="getFieldError('shippingInfo.neighborhood')" class="mt-2 text-sm text-red-600">
                  {{ getFieldError('shippingInfo.neighborhood') }}
                </p>
              </div>

              <div>
                <label for="street" class="block text-sm font-medium text-secondary">Street</label>
                <input id="street" formControlName="street" type="text" required
                       class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                       [ngClass]="{'border-error': getFieldError('shippingInfo.street')}"
                       placeholder="123 Main St">
                <p *ngIf="getFieldError('shippingInfo.street')" class="mt-2 text-sm text-red-600">
                  {{ getFieldError('shippingInfo.street') }}
                </p>
              </div>
            </div>

            <div>
              <label for="complement" class="block text-sm font-medium text-secondary">Address Complement</label>
              <input id="complement" formControlName="complement" type="text"
                     class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                     placeholder="Apartment, suite, unit, building, floor, etc.">
            </div>

            <div class="flex items-center space-x-2">
              <input type="checkbox" class="form-checkbox h-5 w-5 text-primary"
                     [checked]="sameShippingAsBilling"
                     (change)="toggleSameShippingAsBilling($event)">
              <label class="text-sm font-medium text-secondary">Same as shipping address</label>
            </div>

            <div *ngIf="!sameShippingAsBilling" [@slideInRight] formGroupName="billingInfo" class="space-y-6">
              <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                <div>
                  <label for="billingzipCode" class="block text-sm font-medium text-secondary">Zip Code</label>
                  <input id="billingzipCode" formControlName="zipCode" type="text" required
                         class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                         [ngClass]="{'border-error': getFieldError('billingInfo.zipCode')}"
                         placeholder="XXXXX-XXX"
                         cepFormat
                         (input)="onZipCodeChange('billingInfo')">
                  <p *ngIf="getFieldError('billingInfo.zipCode')" class="mt-2 text-sm text-red-600">
                    {{ getFieldError('billingInfo.zipCode') }}
                  </p>
                </div>
              </div>

              <div *ngIf="isLoadingBillingAddress" class="text-center">
                <app-loading-spinner></app-loading-spinner>
                <p class="mt-2 text-sm text-secondary-light">Loading address...</p>
              </div>

              <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
                <div>
                  <label for="billingcountry" class="block text-sm font-medium text-secondary">Country</label>
                  <input readonly id="billingcountry" formControlName="country" type="text"
                         class="mt-1 block w-full px-3 py-2 bg-gray-100 border border-primary rounded-md shadow-input text-secondary-light focus:outline-none sm:text-sm"
                         placeholder="Country">
                </div>

                <div>
                  <label for="billingstate" class="block text-sm font-medium text-secondary">State</label>
                  <input id="billingstate" formControlName="state" type="text" required
                         class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                         [ngClass]="{'border-error': getFieldError('billingInfo.state')}"
                         placeholder="State">
                  <p *ngIf="getFieldError('billingInfo.state')" class="mt-2 text-sm text-red-600">
                    {{ getFieldError('billingInfo.state') }}
                  </p>
                </div>

                <div>
                  <label for="billingcity" class="block text-sm font-medium text-secondary">City</label>
                  <input id="billingcity" formControlName="city" type="text" required
                         class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                         [ngClass]="{'border-error': getFieldError('billingInfo.city')}"
                         placeholder="City">
                  <p *ngIf="getFieldError('billingInfo.city')" class="mt-2 text-sm text-red-600">
                    {{ getFieldError('billingInfo.city') }}
                  </p>
                </div>

                <div>
                  <label for="billingneighborhood" class="block text-sm font-medium text-secondary">Neighborhood</label>
                  <input id="billingneighborhood" formControlName="neighborhood" type="text" required
                         class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                         [ngClass]="{'border-error': getFieldError('billingInfo.neighborhood')}"
                         placeholder="neighborhood">
                  <p *ngIf="getFieldError('billingInfo.neighborhood')" class="mt-2 text-sm text-red-600">
                    {{ getFieldError('billingInfo.neighborhood') }}
                  </p>
                </div>

                <div>
                  <label for="billingstreet" class="block text-sm font-medium text-secondary">Street</label>
                  <input id="billingstreet" formControlName="street" type="text" required
                         class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                         [ngClass]="{'border-error': getFieldError('billingInfo.street')}"
                         placeholder="123 Main St">
                  <p *ngIf="getFieldError('billingInfo.street')" class="mt-2 text-sm text-red-600">
                    {{ getFieldError('billingInfo.street') }}
                  </p>
                </div>
              </div>

              <div>
                <label for="billingcomplement" class="block text-sm font-medium text-secondary">Address Complement</label>
                <input id="billingcomplement" formControlName="complement" type="text"
                       class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                       placeholder="Apartment, suite, unit, building, floor, etc.">
              </div>
            </div>
          </div>

          <!-- Step 3: Payment Information -->
          <div *ngIf="currentStep === 3" [@slideInRight] formGroupName="paymentInfo" class="space-y-6">
            <div>
              <label for="paymentMethod" class="block text-sm font-medium text-secondary">Payment Method</label>
              <select id="paymentMethod" formControlName="paymentMethod" class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm">
                <option value="">Select payment method</option>
                <option value="credit_card">Credit Card</option>
                <option value="debit_card">Debit Card</option>
                <option value="pix">PIX</option>
              </select>
            </div>

            <ng-container *ngIf="checkoutForm.get('paymentInfo.paymentMethod')?.value === 'credit_card' || checkoutForm.get('paymentInfo.paymentMethod')?.value === 'debit_card'">
              <div>
                <label for="cardNumber" class="block text-sm font-medium text-secondary">Card Number</label>
                <input id="cardNumber" formControlName="cardNumber" type="text" required
                       class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                       [ngClass]="{'border-error': getFieldError('paymentInfo.cardNumber')}"
                       placeholder="XXXX XXXX XXXX XXXX">
                <p *ngIf="getFieldError('paymentInfo.cardNumber')" class="mt-2 text-sm text-red-600">
                  {{ getFieldError('paymentInfo.cardNumber') }}
                </p>
              </div>

              <div class="grid grid-cols-2 gap-6">
                <div>
                  <label for="expirationDate" class="block text-sm font-medium text-secondary">Expiration Date</label>
                  <input id="expirationDate" formControlName="expirationDate" type="text" required
                         class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                         [ngClass]="{'border-error': getFieldError('paymentInfo.expirationDate')}"
                         placeholder="MM/YY">
                  <p *ngIf="getFieldError('paymentInfo.expirationDate')" class="mt-2 text-sm text-red-600">
                    {{ getFieldError('paymentInfo.expirationDate') }}
                  </p>
                </div>

                <div>
                  <label for="cvv" class="block text-sm font-medium text-secondary">CVV</label>
                  <input id="cvv" formControlName="cvv" type="text" required
                         class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                         [ngClass]="{'border-error': getFieldError('paymentInfo.cvv')}"
                         placeholder="123">
                  <p *ngIf="getFieldError('paymentInfo.cvv')" class="mt-2 text-sm text-red-600">
                    {{ getFieldError('paymentInfo.cvv') }}
                  </p>
                </div>
              </div>
            </ng-container>

            <ng-container *ngIf="checkoutForm.get('paymentInfo.paymentMethod')?.value === 'pix'">
              <button (click)="pay()">Pay</button>

              <img src="{{ 'data:image/jpg;base64,' + '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' }}" />
            </ng-container>

            <div class="flex justify-between mt-6">
              <button type="button" (click)="onPreviousStep()"
                      [disabled]="currentStep === 3"
                      class="flex justify-center py-2 px-4 border border-primary rounded-md shadow-input text-sm font-medium text-primary hover:bg-primary-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
                Previous
              </button>
              <button type="submit" [disabled]="!isCurrentStepValid()"
                      class="flex justify-center py-2 px-4 border border-transparent rounded-md shadow-input text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
                Place Order
              </button>
            </div>
          </div>

          <div class="flex justify-between mt-6">
            <button type="button" (click)="onPreviousStep()"
                    [disabled]="currentStep === 1"
                    class="flex justify-center py-2 px-4 border border-primary rounded-md shadow-input text-sm font-medium text-primary hover:bg-primary-light focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
              Previous
            </button>
            <button type="button" (click)="onNextStep()"
                    [disabled]="!isCurrentStepValid()"
                    class="flex justify-center py-2 px-4 border border-transparent rounded-md shadow-input text-sm font-medium text-white bg-primary hover:bg-primary-dark focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary transition-colors duration-300 disabled:opacity-50 disabled:cursor-not-allowed">
              Next
            </button>
          </div>
      </form>
    </div>

    <!-- Right Column: Order Summary -->
    <div>
      <div class="bg-white rounded-lg shadow-md p-6 mb-6">
        <h2 class="text-xl font-semibold mb-4">Order Summary</h2>
        <div class="space-y-4">
          <ng-container *ngFor="let item of cartItems$ | async">
            <div class="flex justify-between items-center">
              <div>
                <p class="font-medium">{{ item.product.label }}</p>
                <p class="text-sm text-gray-600">Quantity: {{ item.quantity }}</p>
              </div>
              <p class="font-medium">{{ item.product.markedPrice * item.quantity | currency:'BRL' }}</p>
            </div>
          </ng-container>
        </div>
        <div class="border-t mt-4 pt-4">
          <div class="flex justify-between items-center font-semibold">
            <p>Total</p>
            <p>{{ cartTotal$ | async | currency:'BRL' }}</p>
          </div>
        </div>
      </div>

      <button
        (click)="onSubmit()"
        [disabled]="checkoutForm.invalid || (isLoading$ | async)"
        class="w-full bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50"
      >
        <ng-container *ngIf="!(isLoading$ | async); else processingOrder">
          Place Order
        </ng-container>
        <ng-template #processingOrder>
          Processing...
        </ng-template>
      </button>
    </div>
  </div>
</div>
