<div [formGroup]="checkoutForm">
  <div class="space-y-6" formGroupName="shippingInfo">
    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
      <div>
        <label class="block text-sm font-medium text-secondary" for="zipCode">Zip Code</label>
        <input (input)="onZipCodeChange('shippingInfo')"
               [ngClass]="{'border-error': getFieldError('shippingInfo.zipCode')}" cepFormat
               class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
               formControlName="zipCode"
               id="zipCode"
               placeholder="XXXXX-XXX"
               required
               type="text">
        <p *ngIf="getFieldError('shippingInfo.zipCode')" class="mt-2 text-sm text-red-600">
          {{ getFieldError('shippingInfo.zipCode') }}
        </p>
      </div>
    </div>

    <div *ngIf="isLoadingShippingAddress" class="text-center">
      <app-loading-spinner></app-loading-spinner>
      <p class="mt-2 text-sm text-secondary-light">Loading address...</p>
    </div>

    <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
      <div>
        <label class="block text-sm font-medium text-secondary" for="country">Country</label>
        <input
          class="mt-1 block w-full px-3 py-2 bg-gray-100 border border-primary rounded-md shadow-input text-secondary-light focus:outline-none sm:text-sm"
          formControlName="country" id="country" placeholder="Country"
          readonly
          type="text">
      </div>

      <div>
        <label class="block text-sm font-medium text-secondary" for="state">State</label>
        <input [ngClass]="{'border-error': getFieldError('shippingInfo.state')}"
               class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
               formControlName="state" id="state"
               placeholder="State"
               required
               type="text">
        <p *ngIf="getFieldError('shippingInfo.state')" class="mt-2 text-sm text-red-600">
          {{ getFieldError('shippingInfo.state') }}
        </p>
      </div>

      <div>
        <label class="block text-sm font-medium text-secondary" for="city">City</label>
        <input [ngClass]="{'border-error': getFieldError('shippingInfo.city')}"
               class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
               formControlName="city" id="city"
               placeholder="City"
               required
               type="text">
        <p *ngIf="getFieldError('shippingInfo.city')" class="mt-2 text-sm text-red-600">
          {{ getFieldError('shippingInfo.city') }}
        </p>
      </div>

      <div>
        <label class="block text-sm font-medium text-secondary" for="neighborhood">Neighborhood</label>
        <input [ngClass]="{'border-error': getFieldError('shippingInfo.neighborhood')}"
               class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
               formControlName="neighborhood" id="neighborhood"
               placeholder="neighborhood"
               required
               type="text">
        <p *ngIf="getFieldError('shippingInfo.neighborhood')" class="mt-2 text-sm text-red-600">
          {{ getFieldError('shippingInfo.neighborhood') }}
        </p>
      </div>

      <div>
        <label class="block text-sm font-medium text-secondary" for="street">Street</label>
        <input [ngClass]="{'border-error': getFieldError('shippingInfo.street')}"
               class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
               formControlName="street" id="street"
               placeholder="123 Main St"
               required
               type="text">
        <p *ngIf="getFieldError('shippingInfo.street')" class="mt-2 text-sm text-red-600">
          {{ getFieldError('shippingInfo.street') }}
        </p>
      </div>
    </div>

    <div>
      <label class="block text-sm font-medium text-secondary" for="complement">Address Complement</label>
      <input
        class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
        formControlName="complement" id="complement"
        placeholder="Apartment, suite, unit, building, floor, etc."
        type="text">
    </div>

    <div class="flex items-center space-x-2">
      <input (change)="toggleSameShippingAsBilling($event)" [checked]="sameShippingAsBilling"
             class="form-checkbox h-5 w-5 text-primary"
             type="checkbox">
      <label class="text-sm font-medium text-secondary">Same as shipping address</label>
    </div>

    <div *ngIf="!sameShippingAsBilling" [@slideInRight] class="space-y-6" formGroupName="billingInfo">
      <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
        <div>
          <label class="block text-sm font-medium text-secondary" for="billingzipCode">Zip Code</label>
          <input (input)="onZipCodeChange('billingInfo')"
                 [ngClass]="{'border-error': getFieldError('billingInfo.zipCode')}" cepFormat
                 class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                 formControlName="zipCode"
                 id="billingzipCode"
                 placeholder="XXXXX-XXX"
                 required
                 type="text">
          <p *ngIf="getFieldError('billingInfo.zipCode')" class="mt-2 text-sm text-red-600">
            {{ getFieldError('billingInfo.zipCode') }}
          </p>
        </div>
      </div>

      <div *ngIf="isLoadingBillingAddress" class="text-center">
        <app-loading-spinner></app-loading-spinner>
        <p class="mt-2 text-sm text-secondary-light">Loading address...</p>
      </div>

      <div class="grid grid-cols-1 gap-6 sm:grid-cols-2">
        <div>
          <label class="block text-sm font-medium text-secondary" for="billingcountry">Country</label>
          <input
            class="mt-1 block w-full px-3 py-2 bg-gray-100 border border-primary rounded-md shadow-input text-secondary-light focus:outline-none sm:text-sm"
            formControlName="country" id="billingcountry" placeholder="Country"
            readonly
            type="text">
        </div>

        <div>
          <label class="block text-sm font-medium text-secondary" for="billingstate">State</label>
          <input [ngClass]="{'border-error': getFieldError('billingInfo.state')}"
                 class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                 formControlName="state" id="billingstate"
                 placeholder="State"
                 required
                 type="text">
          <p *ngIf="getFieldError('billingInfo.state')" class="mt-2 text-sm text-red-600">
            {{ getFieldError('billingInfo.state') }}
          </p>
        </div>

        <div>
          <label class="block text-sm font-medium text-secondary" for="billingcity">City</label>
          <input [ngClass]="{'border-error': getFieldError('billingInfo.city')}"
                 class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                 formControlName="city" id="billingcity"
                 placeholder="City"
                 required
                 type="text">
          <p *ngIf="getFieldError('billingInfo.city')" class="mt-2 text-sm text-red-600">
            {{ getFieldError('billingInfo.city') }}
          </p>
        </div>

        <div>
          <label class="block text-sm font-medium text-secondary" for="billingneighborhood">Neighborhood</label>
          <input [ngClass]="{'border-error': getFieldError('billingInfo.neighborhood')}"
                 class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                 formControlName="neighborhood" id="billingneighborhood"
                 placeholder="neighborhood"
                 required
                 type="text">
          <p *ngIf="getFieldError('billingInfo.neighborhood')" class="mt-2 text-sm text-red-600">
            {{ getFieldError('billingInfo.neighborhood') }}
          </p>
        </div>

        <div>
          <label class="block text-sm font-medium text-secondary" for="billingstreet">Street</label>
          <input [ngClass]="{'border-error': getFieldError('billingInfo.street')}"
                 class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
                 formControlName="street" id="billingstreet"
                 placeholder="123 Main St"
                 required
                 type="text">
          <p *ngIf="getFieldError('billingInfo.street')" class="mt-2 text-sm text-red-600">
            {{ getFieldError('billingInfo.street') }}
          </p>
        </div>
      </div>

      <div>
        <label class="block text-sm font-medium text-secondary" for="billingcomplement">Address Complement</label>
        <input
          class="mt-1 block w-full px-3 py-2 bg-white border border-primary rounded-md shadow-input placeholder-secondary-light focus:outline-none focus:ring-primary focus:border-primary sm:text-sm"
          formControlName="complement" id="billingcomplement"
          placeholder="Apartment, suite, unit, building, floor, etc."
          type="text">
      </div>
    </div>
  </div>
</div>
