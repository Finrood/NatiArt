<div class="bg-white rounded-2xl shadow-lg p-8">
  <h2 class="text-2xl font-bold text-gray-800 mb-6 pb-4 border-b border-gray-200">Order Summary</h2>

  @if (cartItems && cartItems.length > 0) {
    <div class="space-y-5 max-h-[60vh] overflow-y-auto pr-2 -mr-2">
      @for (item of cartItems; track item) {
        <div class="flex items-start justify-between pb-5 border-b border-gray-100 last:border-b-0">
          <div class="flex items-start space-x-4">
            <img [src]="imageUrls[item.cartItemId] || 'assets/img/placeholder.png'"
              [alt]="item.product.label"
              class="w-20 h-20 rounded-lg object-cover border border-gray-200 p-1">
            <div>
              <p class="font-semibold text-lg text-gray-800 leading-tight">{{ item.product.label }}</p>
              <p class="text-sm text-gray-600">Qty: {{ item.quantity }}</p>
              @if (item.goldBorder) {
                <p class="text-xs text-yellow-600 font-medium">+ Gold Border</p>
              }
              @if (item.image) {
                <p class="text-xs text-blue-600 font-medium">+ Custom Image</p>
              }
            </div>
          </div>
          <p class="font-bold text-lg text-gray-800 whitespace-nowrap tabular-nums">
            {{ (item.product.markedPrice * item.quantity) | currency:'BRL' }}
          </p>
        </div>
      }
    </div>
  } @else {
    <div class="text-center py-10">
      <svg class="mx-auto h-16 w-16 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1" d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z" /></svg>
      <p class="mt-4 text-gray-600">Your cart is empty.</p>
      <a routerLink="/dashboard" class="mt-4 inline-block text-sm text-primary hover:text-primary-dark font-semibold underline">Start Shopping</a>
    </div>
  }

  @if (cartItems && cartItems.length > 0) {
    <div class="mt-8 pt-6 border-t border-gray-200">
      <div class="space-y-3 text-gray-700">
        <div class="flex justify-between items-center">
          <span class="text-base">Subtotal:</span>
          <span class="font-semibold text-base tabular-nums">{{ cartTotal | currency:'BRL' }}</span>
        </div>
        <div class="flex justify-between items-center text-sm">
          <span class="text-gray-600">Shipping:</span>
          <span class="text-gray-600">Free</span>
        </div>
        <div class="flex justify-between items-center text-sm">
          <span class="text-gray-600">Taxes:</span>
          <span class="text-gray-600">Calculated at checkout</span>
        </div>
      </div>
      <div class="flex justify-between items-center font-bold text-gray-900 text-xl mt-6 pt-6 border-t-2 border-gray-300">
        <p>Total:</p>
        <p class="tabular-nums">{{ cartTotal | currency:'BRL' }}</p>
      </div>
    </div>
  }

</div>